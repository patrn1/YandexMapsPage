<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"> 
    <title>Карты</title>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
</head>
<body>
    <div id="map" style="width: 600px; height: 400px"></div>
    <script type="text/javascript">
        var placemark = null;
        var addPlacemark = function(coords, address) {
            placemark ? myMap.geoObjects.remove(placemark) : null;
            var options = {};
            address ? options.hintContent = address : null;
            placemark = new ymaps.Placemark(coords, options);
            placemark.events.add('dblclick', function(evt) {
                evt.preventDefault();
                myMap.geoObjects.remove(placemark);
            });
            myMap.geoObjects.add(placemark);
        };
        ymaps.ready(init);
        var myMap;
        function init(){     
            myMap = new ymaps.Map("map", {
                center: [56.85, 60.60],
                zoom: 10,
                controls: []
            });
            
            myMap.events.add('click', function(evt) {
                var coords = evt.get('coords');
                var address = null;
                var cb = function(res) {
                    var nearest = res.geoObjects.get(0);
                    var address = nearest.properties.get('name');
                    addPlacemark(coords, address);
                };
                ymaps.geocode(coords).then(cb);
            });
        }
    </script>
    <input
        type="text"
        value="город Екатеринбург, "
        class="address-field"
        onfocus="this.selectionStart = this.selectionEnd = this.value.length;"
    ></input>
    <input type="submit" value="Поиск" class="submit-btn"></input>
    <script>
        var submitBtn = document.querySelector(".submit-btn");
        var addressField = document.querySelector(".address-field");
        addressField.focus();
        submitBtn.addEventListener('click', function() {
            var cb = function(res) {
                var nearest = res.geoObjects.get(0);
                var coords = nearest.geometry.getCoordinates();
                var address = nearest.properties.get('name');
                addPlacemark(coords, address);
                myMap.setCenter(coords, 15);
            }
            ymaps.geocode(addressField.value).then(cb);
        });
    </script>
</body>
</html>
